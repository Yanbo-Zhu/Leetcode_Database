# 题设

Table: `Person`

+-------------+---------+
| Column Name | Type    |
+-------------+---------+
| id          | int     |
| email       | varchar |
+-------------+---------+
id is the primary key column for this table.
Each row of this table contains an email. The emails will not contain uppercase letters.

Write an SQL query to report all the duplicate emails.

Return the result table in **any order**.

The query result format is in the following example.

**Example 1:**

**Input:** 
Person table:
+----+---------+
| id | email   |
+----+---------+
| 1  | a@b.com |
| 2  | c@d.com |
| 3  | a@b.com |
+----+---------+
**Output:** 
+---------+
| Email   |
+---------+
| a@b.com |
+---------+
**Explanation:** a@b.com is repeated two times.

# 自己写的答案

```sql
select  email, Count(id) from Person group by email having  Count(id) >1
```

先计算 每个 email 出现的次数
最后 再加  having Count(id) >1 

# 其他

1. Use self join.
   
   <> 为 != 的意思
   
   ```sql
   SELECT DISTINCT a.Email
   FROM Person a JOIN Person b
   ON (a.Email = b.Email)
   WHERE a.Id <> b.Id 
   ```

2. Use subquery with [EXISTS](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html):
   
   ```sql
   SELECT DISTINCT a.Email
   FROM Person a
   WHERE EXISTS(
       SELECT 1
       FROM Person b
       WHERE a.Email = b.Email
       LIMIT 1
   )
   ```

3. Basic idea is this query:
   
   ```sql
   SELECT DISTINCT Email FROM Person
   MINUS
   (SELECT Id, Email FROM Person GROUP BY Email)
   ```
   
   But since MySQL does not support MINUS, we use LEFT JOIN:
   
   ```sql
      SELECT DISTINCT a.Email FROM Person a
   LEFT JOIN (SELECT Id, Email from Person GROUP BY Email) b
   ON (a.email = b.email) AND (a.Id = b.Id)
   WHERE b.Email IS NULL
   ```